<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" data-mode="dark">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="[MAFM] 구현" />
<meta property="og:locale" content="en" />
<meta name="description" content="Multi-Agent File Management의 구현 과정" />
<meta property="og:description" content="Multi-Agent File Management의 구현 과정" />
<link rel="canonical" href="https://jaewon-ju.github.io/posts/MAFM-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EA%B5%AC%EC%A1%B0-DB/" />
<meta property="og:url" content="https://jaewon-ju.github.io/posts/MAFM-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EA%B5%AC%EC%A1%B0-DB/" />
<meta property="og:site_name" content="JUJU" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-09-26T09:54:36+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[MAFM] 구현" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-26T09:54:36+09:00","datePublished":"2024-09-26T09:54:36+09:00","description":"Multi-Agent File Management의 구현 과정","headline":"[MAFM] 구현","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaewon-ju.github.io/posts/MAFM-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EA%B5%AC%EC%A1%B0-DB/"},"url":"https://jaewon-ju.github.io/posts/MAFM-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EA%B5%AC%EC%A1%B0-DB/"}</script>
<!-- End Jekyll SEO tag -->


  <title>[MAFM] 구현 | JUJU
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="/assets/img/avatar.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/assets/img/avatar.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/assets/img/avatar.png"
/>

<link rel="manifest" href="/assets/img/favicons/site.webmanifest" />

<link rel="shortcut icon" href="/assets/img/avatar.png" />
<meta name="apple-mobile-web-app-title" content="JUJU" />
<meta name="application-name" content="JUJU" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta
  name="msapplication-config"
  content="/assets/img/avatar.png"
/>
<meta name="theme-color" content="#ffffff" />


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">JUJU</a>
    <p class="site-subtitle fst-italic mb-0">Development Blog</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    

    
      

      
        <a
          href="https://github.com/jaewon-ju"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['20011211s','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>[MAFM] 구현</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->


 





<article class="px-1" data-toc="true">
  <header
    style="
      background-color: #1e1e1e;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    "
  >
    <h1 data-toc-skip style="margin-top: 0">[MAFM] 구현</h1>
    
    <p class="post-desc fw-light mb-4">Multi-Agent File Management의 구현 과정</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1727312076"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Sep 26, 2024
</time>

      </span>

      <!-- lastmod date -->
       

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
           By
          <em>
            
            <a href="https://github.com/jaewon-ju">Jaewon Ju</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="3669 words"
>
  <em>20 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
  <div
    id="toc-bar"
    class="d-flex align-items-center justify-content-between invisible"
  >
    <span class="label text-truncate">[MAFM] 구현</span>
    <button type="button" class="toc-trigger btn me-1">
      <i class="fa-solid fa-list-ul fa-fw"></i>
    </button>
  </div>

  <button
    id="toc-solo-trigger"
    type="button"
    class="toc-trigger btn btn-outline-secondary btn-sm"
  >
    <span class="label ps-2 pe-1"
      >Contents</span
    >
    <i class="fa-solid fa-angle-right fa-fw"></i>
  </button>

  <dialog id="toc-popup" class="p-0">
    <div
      class="header d-flex flex-row align-items-center justify-content-between"
    >
      <div class="label text-truncate py-2 ms-4">[MAFM] 구현</div>
      <button
        id="toc-popup-close"
        type="button"
        class="btn mx-1 my-1 opacity-75"
      >
        <i class="fas fa-close"></i>
      </button>
    </div>
    <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
  </dialog>
  

  <br />

  <div class="content"><h3 id="지능형-파일-관리-시스템"><span class="me-2">지능형 파일 관리 시스템</span><a href="#지능형-파일-관리-시스템" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>이전 포스트에서 임의의 자연어를 Embedding하여 Vector DB에 저장하는 플로우를 구현했다.
다음 과정을 구현하기 전에, 프로젝트의 전체 흐름을 다시 짚어보도록 하자.</p>

<hr />

<h2 id="️-what-is-next"><span class="me-2">✏️ What is Next?</span><a href="#️-what-is-next" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>프로젝트의 전체 흐름을 다시 짚어보자.</p>

<p><strong>우리가 개발하는 것은 지능형 파일 관리 시스템(Multi-Agent File Management)이다.</strong></p>

<blockquote>
  <p>일반적인 파일 관리자와 무엇이 다른가?
➜ Multi-Agent를 사용하여 <span style="background-color: lightgreen; color:black">파일 검색</span> 기능을 업그레이드 할 것이다.<br />
ex) “AI와 VectorDB”에 관한 파일을 찾는다고 가정해보자.
일반적인 파일 관리자는 정확히 “AI와 VectorDB” 라는 워딩이 들어간 파일을 찾을 것이다.
루트에서부터 파일을 검색하기 시작하면, 매우 오랜 시간이 소요될 것이다.
또한, 정확히 “AI와 VectorDB”라는 워딩이 들어가 있는 경우만 결과로써 도출할 것이다.<br />
사용자가 원하는 것은 “AI와 Vector”라는 워딩 그 자체가 아니다.
“AI”라는 주제와 “VectorDB”라는 주제에 대해 서술한 파일을 원하는 것이다.<br />
MAFM을 사용하면 위의 문제를 해결할 수 있다.<br /></p>
</blockquote>

<p><br /></p>

<p>VectorDB를 사용하면 사용자가 원하는 쿼리와 <span style="background-color: lightgreen; color:black">연관성이 높은</span> 파일들을 검색할 수 있다.
하지만, VectorDB 하나에 시스템의 모든 파일들을 저장하는 것은 어렵다.
각 Vector의 차원 수가 너무 많아지고 속도도 느려지기 때문이다.</p>

<p>여기서 Multi-Agent를 도입한다!
각 Agent가 하나의 디렉토리와 하나의 VectorDB를 관리하도록 만드는 것이다.
이렇게 하면 VectorDB의 차원 수 부담을 줄일 수 있고 검색 성능도 향상시킬 수 있다. (AI를 사용해서 쿼리의 핵심 내용만 추출하기 때문)</p>

<p><br /></p>

<h3 id="-요구사항"><span class="me-2">■ 요구사항</span><a href="#-요구사항" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>MAFM을 구현하기 위해 개발해야 하는 기능들에 대해서 생각해 보자.</p>

<blockquote>
  <p>사용자가 새로운 파일을 생성하고 저장한다.
-&gt; 파일을 500 Bytes 크기로 쪼갠다. (너무 크면 Embedding이 어려움)
-&gt; 쪼개진 파일의 내용을 읽는다
-&gt; 각 내용을 Embedding 한다.
-&gt; VectorDB에 저장한다.(이 때, 하나의 파일에서 쪼개진 파일들은 모두 같은 id를 가져야 한다.) 
-&gt; 디렉토리에 변경사항이 발생하였으므로 변경 사항을 저장해야 한다.</p>
</blockquote>

<p>변경 사항 저장은 어떻게?
SQLite를 사용한다.
아래와 같은 테이블 구조를 활용해서 디렉토리의 구조와 파일 경로를 표시한다.</p>

<p><br /></p>

<p>2개의 테이블로 분리</p>

<ol>
  <li>파일 경로를 나타내는 테이블</li>
</ol>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>record_id(PK)</th>
      <th>id</th>
      <th>file_path</th>
      <th>is_dir</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>117</td>
      <td>/User/Downloads/</td>
      <td>True</td>
    </tr>
    <tr>
      <td>2</td>
      <td>118</td>
      <td>/User/Downloads/a.txt</td>
      <td>False</td>
    </tr>
    <tr>
      <td>3</td>
      <td>119</td>
      <td>/User/Downloads/a.txt</td>
      <td>False</td>
    </tr>
  </tbody>
</table></div>

<p><br /></p>

<ol>
  <li>디렉토리 구조를 나타내는 테이블</li>
</ol>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>record_id(PK)</th>
      <th>id</th>
      <th>dir_path</th>
      <th>parent_dir_path</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>117</td>
      <td>/User/Downloads/</td>
      <td>/User/</td>
    </tr>
    <tr>
      <td>2</td>
      <td>250</td>
      <td>/User/Downloads/folder1/</td>
      <td>/User/Downloads/</td>
    </tr>
    <tr>
      <td>3</td>
      <td>333</td>
      <td>/User/Downloads/folder1/nested</td>
      <td>/User/Downloads/folder1</td>
    </tr>
  </tbody>
</table></div>

<p>각각에 대한 CRUD 구현 필요</p>

<blockquote>
  <p>사용자가 파일을 검색한다.
-&gt; 검색 쿼리를 각 Agent에게 전달
-&gt; 각 Agent는 자신의 Vector DB에서 검색
-&gt; 나온 결과(file Path)를 반환
-&gt; 반환된 file Path를 기반으로 Symbolic Link를 생성
-&gt; 여러개 파일이 검색되었을 수 있으므로, 생성된 Symbolic Link들을 모두 모아 임시 디렉토리(temp)에 저장
-&gt; 해당 임시 디렉토리를 사용자에게 보여줌</p>
</blockquote>

<p><br /></p>

<h3 id="-what-is-next"><span class="me-2">■ What is next</span><a href="#-what-is-next" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>다음으로 구현해야 할 것은 무엇일까?</p>

<ol>
  <li>디렉토리의 구조와 파일 경로를 저장하는 코드가 필요하다.
    <ul>
      <li>특정 디렉토리를 루트로 설정하고, 해당 디렉토리부터 하위의 모든 파일을 MAFM에서 관리한다.</li>
      <li>SQLite를 사용해서 구현한다.</li>
      <li>루트의 하위 파일들을 탐색해서 저장해야 하는데, 이것을 파이썬과 C언어로 각각 테스트 하여 성능차이를 확인해봐야 한다.</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<hr />

<p><br /></p>

<h2 id="1-디렉토리-구조파일-경로-저장"><span class="me-2">1. 디렉토리 구조/파일 경로 저장</span><a href="#1-디렉토리-구조파일-경로-저장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>디렉토리 구조와 파일 경로를 DB에 저장하는 코드를 구현해보자.</p>

<p><br /></p>

<h3 id="db-crud"><span class="me-2">DB CRUD</span><a href="#db-crud" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<blockquote>
  <p>우선, Python - SQLite 간의 CRUD 기능을 만들어야 한다.</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="c1"># DB 연결 및 초기화 코드
</span><span class="k">def</span> <span class="nf">initialize_database</span><span class="p">(</span><span class="n">db_name</span><span class="o">=</span><span class="sh">'</span><span class="s">filesystem.db</span><span class="sh">'</span><span class="p">):</span>
    <span class="c1"># 기존에 db가 존재하면 날림
</span>    <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="n">db_name</span><span class="p">):</span>
        <span class="n">os</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span>

    <span class="c1"># 데이터베이스 파일에 연결
</span>    <span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="sh">'</span><span class="s">filesystem.db</span><span class="sh">'</span><span class="p">)</span>

    <span class="c1"># 커서 생성
</span>    <span class="c1"># 커서는 SQL 문을 실행하고 결과를 처리하는 데 사용되는 객체이다.
</span>    <span class="c1"># cursor.execute() 메소드를 사용해서 데이터베이스에 대한 SQL 쿼리를 실행할 수 있다.
</span>    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>

    <span class="c1"># 첫 번째 테이블(file_info) 생성
</span>    <span class="n">cursor</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="sh">'''</span><span class="s">
        CREATE TABLE IF NOT EXISTS file_info (
            record_id INTEGER PRIMARY KEY AUTOINCREMENT,
            id TEXT NOT NULL,
            file_path TEXT NOT NULL,
            is_dir INTEGER NOT NULL
        )
    </span><span class="sh">'''</span><span class="p">)</span>

    <span class="c1"># 두 번째 테이블(directory_structure) 생성
</span>    <span class="n">cursor</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="sh">'''</span><span class="s">
        CREATE TABLE IF NOT EXISTS directory_structure (
            record_id INTEGER PRIMARY KEY AUTOINCREMENT,
            id TEXT NOT NULL,
            dir_path TEXT NOT NULL,
            parent_dir_path TEXT
        )
    </span><span class="sh">'''</span><span class="p">)</span>

    <span class="c1"># 변경 사항 저장
</span>    <span class="n">connection</span><span class="p">.</span><span class="nf">commit</span><span class="p">()</span>
    <span class="n">connection</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>cursor는 SQL 문을 실행하고 결과를 처리하는 데 사용되는 객체이다.</li>
</ul>

<p><br /></p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1"># CREATE 함수 - 데이터 삽입
</span><span class="k">def</span> <span class="nf">insert_file_info</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">is_dir</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="sh">'</span><span class="s">filesystem.db</span><span class="sh">'</span><span class="p">):</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="sh">'''</span><span class="s">
        INSERT INTO file_info (id, file_path, is_dir)
        VALUES (?, ?, ?)
    </span><span class="sh">'''</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">is_dir</span><span class="p">))</span>
    <span class="n">connection</span><span class="p">.</span><span class="nf">commit</span><span class="p">()</span>
    <span class="n">connection</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<p>위와 같은 방식으로 CRUD를 모두 구현하였다.</p>

<p><br /></p>

<h3 id="db에-데이터-저장"><span class="me-2">DB에 데이터 저장</span><a href="#db에-데이터-저장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>앞서 만든 CRUD 기능을 사용해서 filesystem DB에 디렉토리 구조/파일 경로를 저장해야 한다.
또한, 각각의 디렉토리 Vector DB에 파일의 내용을 저장해야 한다.</p>

<blockquote>
  <ul>
    <li>filesystem.db 는 디렉토리의 구조와 파일 경로를 저장하는 DB이다.</li>
    <li>[디렉토리 이름].db 는 각 디렉토리에 대응되는 VectorDB로, 파일의 내용 자체를 임베딩해서 저장한다.</li>
  </ul>
</blockquote>

<ol>
  <li>지정한 루트 아래에 존재하는 모든 디렉토리를 탐색하면서, 존재하는 모든 파일 경로를 DB에 저장한다.
    <ul>
      <li>디렉토리도 파일이므로 같이 저장한다.</li>
    </ul>
  </li>
  <li>파일의 경로를 저장한 뒤에는 파일을 읽어서 Embedding하여 Vector화 한다.</li>
  <li>Vector화 된 파일을 각 VectorDB에 저장한다.</li>
</ol>

<p><br /></p>

<p>위의 과정을 파이썬과 C언어로 각각 구현하여 성능을 체크한다.</p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
</pre></td><td class="rouge-code"><pre><span class="c1"># python으로 구현한 코드
</span><span class="k">def</span> <span class="nf">start_command_python</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="c1"># 시작 시간 기록
</span>    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

    <span class="c1"># SQLite DB 연결 및 초기화
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="nf">initialize_database</span><span class="p">(</span><span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error initializing database: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># root 자체는 os.walk(root)에 포함되지 않음 -&gt; 따로 처리 필요
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="nf">initialize_vector_db</span><span class="p">(</span><span class="n">root</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.db</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error initializing vector DB for root: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="nf">print</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="nf">insert_file_info</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># 루트의 부모 디렉토리 찾기
</span>    <span class="n">last_slash_index</span> <span class="o">=</span> <span class="n">root</span><span class="p">.</span><span class="nf">rfind</span><span class="p">(</span><span class="sh">"</span><span class="s">/</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">last_slash_index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">root_parent</span> <span class="o">=</span> <span class="n">root</span><span class="p">[:</span><span class="n">last_slash_index</span><span class="p">]</span>

    <span class="nf">insert_directory_structure</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">root_parent</span><span class="p">,</span> <span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>
    <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># 디렉터리 재귀 탐색
</span>    <span class="k">for</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="nf">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="c1"># 디렉터리 정보 삽입
</span>        <span class="k">for</span> <span class="n">dirname</span> <span class="ow">in</span> <span class="n">dirnames</span><span class="p">:</span>
            <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirname</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="nf">initialize_vector_db</span><span class="p">(</span><span class="n">full_path</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.db</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error initializing vector DB for directory: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="nf">print</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>
            <span class="nf">insert_file_info</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">full_path</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">insert_directory_structure</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">full_path</span><span class="p">,</span> <span class="n">dirpath</span><span class="p">,</span> <span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>
            <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># 파일 정보 삽입 및 벡터 DB에 저장
</span>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="c1"># 비밀 파일(파일 이름이 .으로 시작)과 .db 파일 제외
</span>            <span class="k">if</span> <span class="n">filename</span><span class="p">.</span><span class="nf">startswith</span><span class="p">(</span><span class="sh">"</span><span class="s">.</span><span class="sh">"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="p">.</span><span class="nf">endswith</span><span class="p">(</span><span class="sh">"</span><span class="s">.db</span><span class="sh">"</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>

            <span class="c1"># 파일 정보 삽입
</span>            <span class="nf">insert_file_info</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">full_path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">filesystem.db</span><span class="sh">"</span><span class="p">)</span>

            <span class="n">file_chunks</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># 파일 데이터를 500Bytes씩 읽기
</span>            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="sh">"</span><span class="s">rb</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
                    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                        <span class="n">chunk</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
                            <span class="k">break</span>
                        <span class="n">file_chunks</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span>
                            <span class="n">chunk</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="sh">"</span><span class="s">utf-8</span><span class="sh">"</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="sh">"</span><span class="s">ignore</span><span class="sh">"</span><span class="p">)</span>
                        <span class="p">)</span>  <span class="c1"># 바이너리 데이터를 문자열로 변환
</span>            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Failed to read file data for </span><span class="si">{</span><span class="n">full_path</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># 각 디렉토리의 벡터 DB에 해당 파일 내용을 저장
</span>            <span class="nf">save</span><span class="p">(</span><span class="n">dirpath</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.db</span><span class="sh">"</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">file_chunks</span><span class="p">)</span>

            <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># 종료 시간 기록
</span>    <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

    <span class="c1"># 걸린 시간 계산
</span>    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">작업에 걸린 시간: </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="p">.</span><span class="mi">4</span><span class="n">f</span><span class="si">}</span><span class="s"> 초</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>
<p>MAFM_test 디렉토리로 테스트 한 경우 15.5217초 걸림</p>

<p><br /></p>

<p>c를 사용해서 위의 로직을 구현하려면, 우선 해당 디렉토리에 존재하는 모든 파일 리스트를 얻고 각 파일의 내용을 Read 하는 코드가 필요하다.</p>

<div class="language-c highlighter-rouge"><div class="code-header">
        <span data-label-text="C"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
</pre></td><td class="rouge-code"><pre><span class="c1">// get_file_data: 주어진 파일 경로에 대한 정보를 읽고 필요한 데이터를 반환</span>
<span class="c1">// 입력: path (파일 경로)</span>
<span class="c1">// 출력: 파일 정보 배열 (파일 경로, 파일 이름, 파일 내용 조각)</span>
<span class="cm">/* 파일 정보 배열의 구조:
 * data[0]: 파일의 전체 경로 (char*)
 * data[1]: 파일의 이름 (char*)
 * data[2], data[3], ...: 파일 내용을 일정 크기(chunkSize)로 나눈 조각들 (char*)
 * 마지막 data[idx + 1]: NULL 포인터 (배열의 끝을 알리기 위해)
*/</span>
<span class="kt">char</span><span class="o">**</span> <span class="nf">get_file_data</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 파일을 읽기 모드로 엽니다.</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to open file"</span><span class="p">);</span> <span class="c1">// 파일 열기 실패 시 오류 메시지 출력</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
    <span class="p">}</span>

    <span class="c1">// 파일 이름을 가져옵니다.</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">fname</span> <span class="o">=</span> <span class="n">get_filename</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fname</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to get filename"</span><span class="p">);</span> <span class="c1">// 파일 이름을 가져오는 데 실패하면 오류 메시지 출력</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
    <span class="p">}</span>

    <span class="c1">// 파일이 이미지 또는 비디오인지 확인합니다.</span>
    <span class="kt">int</span> <span class="n">is_image_or_video_flag</span> <span class="o">=</span> <span class="n">is_image_or_video</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>

    <span class="c1">// 이미지 또는 비디오 파일일 경우</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">is_image_or_video_flag</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">char</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// data 배열에 3개의 포인터 공간을 할당합니다.</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to allocate memory for data array"</span><span class="p">);</span> <span class="c1">// 메모리 할당 실패 시 오류 메시지 출력</span>
            <span class="n">free</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span> <span class="c1">// 파일 이름 메모리 해제</span>
            <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
        <span class="p">}</span>
        <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">path</span><span class="p">);</span> <span class="c1">// 경로 복사</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to duplicate path"</span><span class="p">);</span> <span class="c1">// 경로 복사 실패 시 오류 메시지 출력</span>
            <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="c1">// data 배열 해제</span>
            <span class="n">free</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span> <span class="c1">// 파일 이름 해제</span>
            <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
        <span class="p">}</span>
        <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">fname</span><span class="p">;</span> <span class="c1">// 파일 이름 저장</span>
        <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 마지막에 NULL 포인터 설정 (배열의 끝을 알리기 위해)</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">;</span> <span class="c1">// data 배열 반환</span>
    <span class="p">}</span>

    <span class="c1">// 일반 파일일 경우, 초기 배열 크기를 설정합니다.</span>
    <span class="kt">int</span> <span class="n">maxChunks</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">**</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="o">*</span> <span class="n">maxChunks</span><span class="p">);</span> <span class="c1">// 초기 크기 4로 data 배열 할당</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to allocate memory for data array"</span><span class="p">);</span> <span class="c1">// 메모리 할당 실패 시 오류 메시지 출력</span>
        <span class="n">free</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span> <span class="c1">// 파일 이름 해제</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
    <span class="p">}</span>

    <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">path</span><span class="p">);</span> <span class="c1">// 파일 경로 복사</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to duplicate path"</span><span class="p">);</span> <span class="c1">// 파일 경로 복사 실패 시 오류 메시지 출력</span>
        <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="c1">// data 배열 해제</span>
        <span class="n">free</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span> <span class="c1">// 파일 이름 해제</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
    <span class="p">}</span>

    <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">fname</span><span class="p">;</span> <span class="c1">// 파일 이름 저장</span>

    <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 데이터 조각을 저장할 인덱스 시작 (0과 1은 경로와 이름)</span>
    <span class="kt">int</span> <span class="n">chunkSize</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span> <span class="c1">// 각 조각의 크기 (500바이트)</span>
    <span class="kt">int</span> <span class="n">bytesRead</span><span class="p">;</span>

    <span class="c1">// 파일 내용을 500바이트씩 읽습니다.</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;=</span> <span class="n">maxChunks</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// 현재 배열의 크기가 부족할 경우 크기를 2배로 늘립니다.</span>
            <span class="n">maxChunks</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
            <span class="kt">char</span> <span class="o">**</span><span class="n">temp</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">maxChunks</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to reallocate memory for data array"</span><span class="p">);</span> <span class="c1">// 메모리 재할당 실패 시 오류 메시지 출력</span>
                <span class="c1">// 이미 할당된 메모리 해제</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">idx</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
                <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
                <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
            <span class="p">}</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span> <span class="c1">// 재할당된 메모리 주소로 업데이트</span>
        <span class="p">}</span>

        <span class="c1">// 새로운 조각을 위한 메모리 할당</span>
        <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">chunkSize</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to allocate memory for chunk"</span><span class="p">);</span> <span class="c1">// 메모리 할당 실패 시 오류 메시지 출력</span>
            <span class="c1">// 이미 할당된 메모리 해제</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">idx</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
            <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
        <span class="p">}</span>

        <span class="c1">// 파일에서 chunkSize만큼 읽기</span>
        <span class="n">bytesRead</span> <span class="o">=</span> <span class="n">fread</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="n">chunkSize</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bytesRead</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">bytesRead</span> <span class="o">&lt;</span> <span class="n">chunkSize</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// 만약 읽은 바이트가 chunkSize보다 적다면 메모리 크기 조정</span>
                <span class="kt">char</span> <span class="o">*</span><span class="n">adjusted</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">bytesRead</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">adjusted</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">adjusted</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">idx</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bytesRead</span> <span class="o">&lt;</span> <span class="n">chunkSize</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">feof</span><span class="p">(</span><span class="n">file</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span> <span class="c1">// 파일 끝에 도달하면 종료</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ferror</span><span class="p">(</span><span class="n">file</span><span class="p">))</span> <span class="p">{</span>
                <span class="n">perror</span><span class="p">(</span><span class="s">"Error reading file"</span><span class="p">);</span> <span class="c1">// 파일 읽기 중 오류 발생 시 메시지 출력</span>
                <span class="c1">// 이미 할당된 메모리 해제</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">idx</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
                <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
                <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 마지막에 NULL 포인터 설정 (배열의 끝을 알리기 위해)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="n">maxChunks</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// 추가 공간이 필요하면 재할당하여 NULL 포인터 추가</span>
        <span class="kt">char</span> <span class="o">**</span><span class="n">temp</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">perror</span><span class="p">(</span><span class="s">"Failed to reallocate memory for terminating NULL pointer"</span><span class="p">);</span> <span class="c1">// 메모리 재할당 실패 시 오류 메시지 출력</span>
            <span class="c1">// 이미 할당된 메모리 해제</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">idx</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
            <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 실패 시 NULL 반환</span>
        <span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
        <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span> <span class="c1">// 파일 닫기</span>
    <span class="k">return</span> <span class="n">data</span><span class="p">;</span> <span class="c1">// 파일 정보와 조각들을 포함한 data 배열 반환</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># C를 사용해서 구현한 코드
</span>
</pre></td></tr></tbody></table></code></div></div>

<p><br /></p>

<p>C언어로 변경 -&gt; 약 10%의 속도 증진</p>

</div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
    <div class="post-meta mb-3">
      <i class="far fa-folder-open fa-fw me-1"></i>
      
      <a
        href="/categories/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/"
        >프로젝트</a
      >
    </div>
    

    <!-- tags -->
    
    <div class="post-tags">
      <i class="fa fa-tags fa-fw me-1"></i>
      
      <a
        href="/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/"
        class="post-tag no-text-decoration"
      >프로젝트</a>
      
    </div>
    

    <div
      class="post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 opacity-50"
    >
      <div class="license-wrapper">
          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author. 
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=[MAFM]%20%EA%B5%AC%ED%98%84%20-%20JUJU&url=https%3A%2F%2Fjaewon-ju.github.io%2Fposts%2FMAFM-%25EB%2594%2594%25EB%25A0%2589%25ED%2586%25A0%25EB%25A6%25AC-%25EA%25B5%25AC%25EC%25A1%25B0-DB%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=[MAFM]%20%EA%B5%AC%ED%98%84%20-%20JUJU&u=https%3A%2F%2Fjaewon-ju.github.io%2Fposts%2FMAFM-%25EB%2594%2594%25EB%25A0%2589%25ED%2586%25A0%25EB%25A6%25AC-%25EA%25B5%25AC%25EC%25A1%25B0-DB%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fjaewon-ju.github.io%2Fposts%2FMAFM-%25EB%2594%2594%25EB%25A0%2589%25ED%2586%25A0%25EB%25A6%25AC-%25EA%25B5%25AC%25EC%25A1%25B0-DB%2F&text=[MAFM]%20%EA%B5%AC%ED%98%84%20-%20JUJU" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->

  <br />

  <script
    src="https://giscus.app/client.js"
    data-repo="jaewon-ju/jaewon-ju.github.io"
    data-repo-id="R_kgDOPZ-BFA"
    data-category="General"
    data-category-id="DIC_kwDOPZ-BFM4Ct9Si"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="ko"
    crossorigin="anonymous"
    async
  ></script>
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B2%A8%EB%A1%9C%EA%B7%B8-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B3%A0%EC%B3%90%EC%A3%BC%EC%84%B8%EC%9A%94%E3%85%A0%E3%85%A0/">[프로젝트] Velog->GitHub.io 동기화 툴</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-Velog-GitHub.io-%EB%8F%99%EA%B8%B0%ED%99%94-%ED%88%B4/">[프로젝트] Velog->GitHub.io 동기화 툴</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-Backtracking/">[코딩테스트] Backtracking, Two Pointers, 최단거리</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/7%EA%B0%9C%EC%9B%94%EA%B0%84%EC%9D%98-%EC%8A%A4%ED%83%80%ED%8A%B8%EC%97%85-%EC%9D%B8%ED%84%B4-%ED%9A%8C%EA%B3%A0/">7개월간의 스타트업 인턴 회고</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-DFS-%EA%B5%AC%ED%98%84/">[코딩테스트] BFS, DFS</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">Spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">Java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/troubleshooting/">TROUBLESHOOTING</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cs%EC%A7%80%EC%8B%9D/">CS지식</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/os/">OS</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">MVC</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/springboot/">Springboot</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/auth/">Auth</a>
      
    </div>
  </section>


            </div>

            
              
              



 
<div class="toc-border-cover z-3"></div>
<section id="toc-wrapper" class="position-sticky ps-0 pe-4 pb-4">
  <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
  <nav id="toc"></nav>
</section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/%EC%A3%BC%EC%8B%9D-%EB%B6%84%EC%84%9D-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-10%EC%9D%BC%EC%B0%A8/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1714744295"
  data-df="ll"
  
>
  May  3, 2024
</time>

              <h4 class="pt-0 my-2">[quantHelper] 개발 - API4</h4>
              <div class="text-muted">
                <p>10일차</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%EC%A3%BC%EC%8B%9D-%EB%B6%84%EC%84%9D-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-9%EC%9D%BC%EC%B0%A8/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1713082840"
  data-df="ll"
  
>
  Apr 14, 2024
</time>

              <h4 class="pt-0 my-2">[quantHelper] 개발 - API3</h4>
              <div class="text-muted">
                <p>9일차</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/%EC%A3%BC%EC%8B%9D-%EB%B6%84%EC%84%9D-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-7%EC%9D%BC%EC%B0%A8/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1712850534"
  data-df="ll"
  
>
  Apr 12, 2024
</time>

              <h4 class="pt-0 my-2">[quantHelper] 개발 - API2</h4>
              <div class="text-muted">
                <p>7일차</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%96%B8%EC%96%B4%EB%A1%A0-Logic-Programming/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>[프로그래밍언어론] Logic Programming</p>
    </a>
  

  
    <a
      href="/posts/%EC%99%B8%EC%A3%BC-firebase-%EC%B1%84%ED%8C%85-%EA%B8%B0%EB%8A%A5/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>[외주] firebase 채팅 기능</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://github.com/jaewon-ju">Jaewon Ju</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.3.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring/">Spring</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">Java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/troubleshooting/">TROUBLESHOOTING</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/cs%EC%A7%80%EC%8B%9D/">CS지식</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/os/">OS</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">MVC</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/springboot/">Springboot</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/auth/">Auth</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script>
  (function () {
    const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed');
    const initTheme = themeMapper[Theme.visualState];

    let lang = 'ko';if (lang.length > 2 && !lang.startsWith('zh')) {
      lang = lang.slice(0, 2);
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'jaewon-ju/jaewon-ju.github.io',
      'data-repo-id': 'R_kgDOPZ-BFA',
      'data-category': 'General',
      'data-category-id': 'DIC_kwDOPZ-BFM4Ct9Si',
      'data-mapping': 'pathname',
      'data-strict' : '0',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': lang,
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusNode = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusNode.setAttribute(key, value)
    );

    const $footer = document.querySelector('footer');
    $footer.insertAdjacentElement("beforebegin", giscusNode);

    addEventListener('message', (event) => {
      if (event.source === window && event.data && event.data.id === Theme.ID) {
        const newTheme = themeMapper[Theme.visualState];

        const message = {
          setConfig: {
            theme: newTheme
          }
        };

        const giscus =
          document.getElementsByClassName('giscus-frame')[0].contentWindow;
        giscus.postMessage({ giscus: message }, 'https://giscus.app');
      }
    });
  })();
</script>



    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

